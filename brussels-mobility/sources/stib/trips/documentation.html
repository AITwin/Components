<!-- Embedded fragment: STIB/MIVB — Trips -->
<div id="stib-trips">
  <style>
    /* Scoped styles */
    #stib-trips { font-family: Inter, Arial, sans-serif; max-width: 980px; margin: 28px auto; line-height: 1.6; color: #222; padding: 0 16px; }
    #stib-trips h1,
    #stib-trips h2,
    #stib-trips h3 { color: #16324a; margin-top: 1.1rem; }
    #stib-trips code,
    #stib-trips pre { background: #f6f8fa; border-radius: 6px; }
    #stib-trips pre { padding: 12px; overflow: auto; }
    #stib-trips table { width: 100%; border-collapse: collapse; margin: 12px 0; }
    #stib-trips th,
    #stib-trips td { border: 1px solid #e1e4e8; padding: 8px; text-align: left; vertical-align: top; }
    #stib-trips th { background: #f3f6f9; }
    #stib-trips .muted { color:#566; font-size: 0.95rem; }
    #stib-trips ul { margin: 0.4rem 0 0.8rem 1.1rem; }
    #stib-trips .section { margin-bottom: 18px; }
  </style>

  <h1>STIB/MIVB — Trips</h1>
  <pre><code>GET /stib/trips</code></pre>
  <p class="muted">
    Returns all trips of STIB/MIVB for a specified period of time, aggregated from vehicle position data.  
    Data is returned in MF-JSON (Moving Features JSON) format, representing vehicle trajectories over space and time.
  </p>

  <div class="section">
    <h2>Description</h2>
    <p>
      This endpoint provides trip-level trajectory data derived from STIB/MIVB vehicle positions.  
      Each moving feature represents the path of a vehicle (bus, tram, or metro) during a given time window, with timestamps aligned to observed positions.
      The dataset allows for reconstruction of vehicle movements, visualization of network dynamics, and temporal analytics.
    </p>
  </div>

  <!-- Removed: Authentication -->
  <!-- Removed: Output Format -->
  <!-- Removed: Response Schema -->

  <div class="section">
    <h2>Query Parameters</h2>
    <table>
      <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
      <tr>
        <td><code>start_timestamp</code></td>
        <td>integer</td>
        <td>Yes</td>
        <td>Start timestamp (Unix epoch seconds). Defines the beginning of the query window.</td>
      </tr>
      <tr>
        <td><code>end_timestamp</code></td>
        <td>integer</td>
        <td>Yes</td>
        <td>End timestamp (Unix epoch seconds). Defines the end of the query window.</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h2>Output Data Attributes</h2>
    <table>
      <tr><th>Attribute</th><th>Type</th><th>Description</th></tr>
      <tr><td>type</td><td>string</td><td>Always <code>MovingFeatureCollection</code>. OGC Moving Features JSON (MF-JSON) format for representing objects moving through space and time. Unlike static GeoJSON, this format couples spatial geometries (trajectories) with temporal sequences (timestamps), enabling dynamic visualization of vehicle movements, travel time analysis along routes, and spatiotemporal pattern discovery across STIB/MIVB's Brussels transit network.</td></tr>
      <tr><td>features</td><td>array</td><td>Collection of moving features, each representing one complete vehicle trip (journey from origin terminus to destination terminus, or within the query time window if trip extends beyond boundaries). Array size depends on service frequency, number of active lines, and query duration—a typical rush-hour window might contain hundreds to thousands of trips across STIB's tram, bus, and metro operations. Each feature captures both the spatial path traveled and temporal progression, enabling trajectory-based analytics, travel time studies, and service pattern visualization.</td></tr>
      <tr><td>features[].type</td><td>string</td><td><code>MovingFeature</code>. OGC Moving Features designation for an object moving through space-time. Each feature couples a spatial trajectory (LineString geometry) with a temporal sequence (timestamps array), enabling analysis of when and where vehicles were at specific moments. Critical for animated map displays showing historical vehicle movements, speed calculations between points, and understanding temporal service patterns.</td></tr>
      <tr><td>features[].id</td><td>string</td><td>Unique trip identifier distinguishing this specific vehicle journey. Generated by MobilityTwin.Brussels to provide consistent trip tracking despite STIB source API limitations. Enables trip-level analysis (calculating end-to-end travel times, identifying trips with unusual trajectories), joining with other trip-related datasets (passenger counts, fare collection, service quality metrics), and filtering for specific vehicles or routes of interest.</td></tr>
      <tr><td>features[].geometry</td><td>object</td><td>Spatial geometry object representing the vehicle's observed path through Brussels during this trip. Unlike static route shapes (planned paths from GTFS), this represents actual traveled trajectory based on real-time position estimates. Geometry includes coordinate array defining the path and may reveal operational realities: detours due to construction, route deviations for special events, or GPS artifacts from signal obstructions in urban canyons.</td></tr>
      <tr><td>geometry.type</td><td>string</td><td>Typically <code>LineString</code>. Represents the trip as a continuous path through geographic space, connecting sequential position observations into a coherent trajectory. The linestring traces the vehicle's movement from origin toward destination, with vertices corresponding to observed position fixes (typically collected every 30-60 seconds). Enables path-based spatial queries (trips intersecting an area of interest), route deviation analysis (comparing actual vs. planned paths), and visualization of service coverage.</td></tr>
      <tr><td>geometry.coordinates</td><td>array</td><td>Ordered array of [longitude, latitude] coordinate pairs in WGS84 (EPSG:4326) tracing the vehicle's path chronologically from trip start to end (or query window boundaries). For Brussels: longitude ~4.24-4.48°E, latitude ~50.79-50.91°N. Number of coordinates equals number of position observations during the trip—typically dozens to hundreds depending on trip duration and observation frequency. Sequential coordinates connected by straight lines approximate the actual traveled path. Used for calculating trip distances (summing segment lengths), identifying stop locations (vertices with extended dwell times), and mapping actual service patterns vs. published route geometry.</td></tr>
      <tr><td>features[].properties</td><td>object</td><td>Trip metadata bundle containing temporal sequencing (timestamps), route identification (line_id, direction_id), and trip context. These properties enable filtering trips by line/direction, synchronizing spatial positions with temporal observations for speed calculations, and understanding operational context (which service this trip represents). The timestamps array is parallel to geometry.coordinates—each coordinate has a corresponding timestamp indicating when the vehicle was observed at that location.</td></tr>
    </table>
    <pre><code>{
  "type": "MovingFeatureCollection",
  "features": [
    {
      "type": "MovingFeature",
      "id": "string",
      "geometry": {
        "type": "LineString",
        "coordinates": [[number, number]]
      },
      "properties": {
        "timestamps": ["YYYY-MM-DDTHH:MM:SSZ"],
        "line_id": "string",
        "direction_id": "string"
      }
    }
  ]
}</code></pre>
    
    <p style="margin-top: 1.5em; padding: 0.75em; background: #f8f9fa; border-left: 3px solid #00a4e0; font-size: 0.95em;">
      <strong>Operational Context:</strong> This trip trajectory feed provides spatiotemporal vehicle movement data in OGC Moving Features format, enabling dynamic analysis of STIB/MIVB's Brussels transit operations over time. 
      <em>For transit analysts and performance monitoring</em>, trajectories enable travel time calculations between any two points along a route (measuring corridor-level speeds, identifying slow segments), schedule adherence assessment (comparing actual trip durations vs. planned schedules), and service regularity analysis (detecting vehicle bunching or gaps through trajectory clustering). 
      <em>For service planners and infrastructure teams</em>, trajectory data reveals operational realities: persistent route deviations indicating infrastructure constraints (construction zones forcing detours), speed variations along corridors highlighting bottlenecks requiring intervention (dedicated lanes, signal priority), and spatial patterns of delays (chronic slow zones suggesting capital investment priorities). 
      <em>For visualization and public engagement</em>, moving features enable animated map displays showing "how Brussels transit moved" during specific time periods—illustrating rush-hour congestion patterns, special event impacts on service, or network-wide disruptions during incidents. The coupled spatial-temporal data (coordinates + timestamps) supports creation of time-lapse visualizations for stakeholder communication. 
      <em>For researchers and urban mobility studies</em>, trip trajectories enable comparative analyses across time periods (before/after infrastructure changes), modal comparisons (tram vs. bus speeds on parallel corridors), and integration with other urban datasets (correlating transit speeds with traffic conditions, weather impacts, special events). 
      The Moving Features format's parallel arrays (coordinates paired with timestamps) enable precise spatiotemporal queries impossible with static geometries—finding exactly where all tram 81 trips were at 8:30 AM, calculating average speeds through specific intersections across thousands of observations, or identifying trajectory outliers indicating operational anomalies.
    </p>
  </div>

  <div class="section">
    <h2>Data Information</h2>
    <p class="muted">
      No static information available for this component.  
      Availability and completeness depend on the upstream vehicle-position data source.
    </p>
  </div>

  <div class="section">
    <h2>Example Application Scenarios</h2>
    <ul>
      <li>Visualization of vehicle movements across time (animated maps)</li>
      <li>Service reliability and delay analysis</li>
      <li>Spatial-temporal clustering of traffic activity</li>
      <li>Integration with real-time monitoring dashboards</li>
    </ul>
  </div>
</div>